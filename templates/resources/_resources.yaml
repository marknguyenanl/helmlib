{{- define "helmlib.engineused" -}}
{{ $usedengine := (.Values.overlay).usedengine }}

{{/* {{- range $engine := ($.Values.root).engines }} */}}
{{/* --- */}}
{{/* {{- if $engine }} */}}
resources: 
{{- with (.Values.root).engines }}
{{ $requests :=  printf ".%+v.requests" $usedengine}}
{{ $limits :=  printf ".%+v.limits" $usedengine }}
  requests:
    cpu: {{ $requests.cpu }}
    memory: {{ $requests.memory }}
  limits:
    cpu: {{ $limits.cpu }}
    memory: {{ $limits.memory }}
{{/* --- */}}
{{/* {{- end -}} */}}
{{- end -}}
{{- end -}}
