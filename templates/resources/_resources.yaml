{{- define "helmlib.engine.requests" -}}
{{- $usedengine := .Values.overlay.usedengine -}}
{{- $requestcpu := .Values.root.engineRequests.cpu -}}
requests:
  cpu: {{ pluck $usedengine $requestcpu | first | default $requestcpu._default }}
  {{/* memory: {{ pluck $usedengine $engineRequests | first | default $engineRequests.memory._default }} */}}
{{- end -}}

{{/* {{- define "helmlib.engine.limits" -}} */}}
{{/* {{- $usedengine := .Values.overlay.usedengine -}} */}}
{{/* {{- $engineLimits := .Values.root.engineLimits }} */}}
{{/* limits: */}}
{{/*   cpu: {{ pluck $usedengine $engineLimits | first | default $engineLimits.cpu._default }} */}}
{{/*   memory: {{ pluck $usedengine $engineLimits | first | default $engineLimits.memory._default }} */}}
{{/* {{- end -}} */}}

{{- define "helmlib.engine.resources" -}}
resources:
{{- include "helmlib.engine.requests" . | indent 2 -}}
{{/* {{- include "helmlib.engine.limits" . | nindent 2 -}} */}}
{{- end -}}

