{{- define "helmlib.engineused" -}}
{{ $usedengine := (.Values.overlay).usedengine }}
{{/* {{- range $engine := ($.Values.root).engines }} */}}
{{/* --- */}}
{{/* {{- if $engine }} */}}
resources: 
{{- with .Values.root.engines }}
{{ $requests :=  printf ".%+v.requests" $usedengine}}
{{ $limits :=  printf ".%+v.limits" $usedengine }}
{{- with $requests}}
  requests:
    cpu: {{ .cpu }}
    memory: {{ .memory }}
{{- end -}}
{{- with $limits}}
  limits:
    cpu: {{ .cpu }}
    memory: {{ .memory }}
{{- end -}}
{{/* --- */}}
{{/* {{- end -}} */}}
{{- end -}}
{{- end -}}
