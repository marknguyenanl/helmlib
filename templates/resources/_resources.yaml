{{/* {{ define "helmlib.usefamily"}} */}}
{{/* {{ .Value.overlay.usefamily }} */}}
{{/* {{ end }} */}}
{{/* {{ define "helmlib.usemachine"}} */}}
{{/* {{ .Value.overlay.usemachine }} */}}
{{/* {{ end }} */}}

{{ define "helmlib.machine" }}
{{ $machine := .Values.global.machines }}
{{ if eq $machine.name "vm1l1"}}
{{ $reqmem := mul $machine.reqcpu 1.28}}
resources:
  requests:
    cpu: {{ $machine.reqcpu }}m
    memory: {{ mul $machine.reqmem $machine.memtocpu }}Mi
  limits:
    cpu: {{ mul $machine.reqcpu $machine.limittoreq }}m
    memory: {{ mul $machine.reqmem $machine.memtocpu $machine.limittoreq }}Mi
{{ end }}
{{ end }}
